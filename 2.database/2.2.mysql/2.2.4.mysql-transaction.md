##### READ UNCOMMITTED

| steps | session 1                                                    | session 2                                                    |
| :---- | :----------------------------------------------------------- | :----------------------------------------------------------- |
|       | `mysql> show variables like '%iso%';` <br>  `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| REPEATABLE-READ \|` <br> `\| tx_isolation          \| REPEATABLE-READ \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.02 sec)` | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| REPEATABLE-READ \|` <br> `\| tx_isolation          \| REPEATABLE-READ \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.02 sec)` |
|       | `mysql> set session tx_isolation='READ-UNCOMMITTED';` <br> `Query OK, 0 rows affected, 1 warning (0.01 sec)` |                                                              |
|       | `mysql> show variables like '%iso%';` <br> `+-----------------------+------------------+` <br>  `\| Variable_name         \| Value           \|` <br> `+-----------------------+------------------+` <br> `\| transaction_isolation \| READ-UNCOMMITTED \|` <br> `\| tx_isolation          \| READ-UNCOMMITTED \|` <br> `+-----------------------+------------------+` <br> `2 rows in set (0.01 sec)` |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.01 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.01 sec)` |
|       | `mysql> begin;` <br> `Query OK, 0 rows affected (0.00 sec)`  | `mysql> begin;` <br> `Query OK, 0 rows affected (0.00 sec)`  |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` |
|       | `mysql> insert into test1 value(3);` <br> `Query OK, 1 row affected (0.01 sec)` |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `+----+` <br> `3 rows in set (0.01 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` |
|       |                                                              | `mysql> insert into test1 value(4);` <br> `Query OK, 1 row affected (0.01 sec)` |
|       | `mysql> select * from test1;`<br>`+----+`<br>`\| id \|`<br>`+----+`<br>`\|  1 \|`<br>`\|  2 \|`<br>`\|  3 \|`<br>`\|  4 \|`<br>`+----+`<br>`4 rows in set (0.01 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  4 \|` <br> `+----+` <br> `3 rows in set (0.01 sec)` |

##### READ COMMITTED

| steps | session 1                                                    | session 2                                                    |
| ----- | ------------------------------------------------------------ | ------------------------------------------------------------ |
|       | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| REPEATABLE-READ \|` <br> `\| tx_isolation          \| REPEATABLE-READ \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| REPEATABLE-READ \|` <br> `\| tx_isolation          \| REPEATABLE-READ \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` |
|       | `mysql> set session tx_isolation='READ-COMMITTED';` <br> `Query OK, 0 rows affected, 1 warning (0.00 sec)` |                                                              |
|       | `mysql> show variables like '%iso%';` <br> `+-----------------------+----------------+` <br> `\| Variable_name         \| Value          \|` <br> `+-----------------------+----------------+` <br> `\| transaction_isolation \| READ-COMMITTED \|` <br> `\| tx_isolation          \| READ-COMMITTED \|` <br> `+-----------------------+----------------+` <br> `2 rows in set (0.01 sec)` |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` |
|       | `mysql> begin;` <br> `Query OK, 0 rows affected (0.00 sec)`  | `mysql> begin;` <br> `Query OK, 0 rows affected (0.00 sec)`  |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` |
|       |                                                              | `mysql> insert into test1 value(3);` <br> `Query OK, 1 row affected (0.00 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `+----+` <br> `2 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `+----+` <br> `3 rows in set (0.00 sec)` |
|       |                                                              | `mysql> commit;` <br> `Query OK, 0 rows affected (0.01 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `+----+` <br> `3 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `+----+` <br> `3 rows in set (0.00 sec)` |
|       | `mysql> insert into test1 value(4);` <br> `Query OK, 1 row affected (0.00 sec)` |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br>  `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `+----+` <br> `3 rows in set (0.00 sec)` |
|       | `mysql> commit;` <br> `Query OK, 0 rows affected (0.00 sec)` |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br>  `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br>  `+----+` <br> `4 rows in set (0.00 sec)` |

##### REPEATABLE READ

| steps | session 1                                                    | session 2                                                    |
| ----- | ------------------------------------------------------------ | ------------------------------------------------------------ |
|       | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| READ-COMMITTED \|` <br> `\| tx_isolation          \| READ-COMMITTED \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| REPEATABLE-READ \|` <br> `\| tx_isolation          \| REPEATABLE-READ \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` |
|       | `mysql> set session tx_isolation='REPEATABLE-READ';` <br/> `Query OK, 0 rows affected, 1 warning (0.00 sec)` |                                                              |
|       | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| REPEATABLE-READ \|` <br> `\| tx_isolation          \| REPEATABLE-READ \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br>  `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `+----+` <br> `4 rows in set (0.00 sec)` |
|       | `mysql> begin;` <br/> `Query OK, 0 rows affected (0.00 sec)` | `mysql> begin;` <br/> `Query OK, 0 rows affected (0.00 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `+----+` <br> `4 rows in set (0.00 sec)` |
|       |                                                              | `mysql> insert into test1 value(5);` <br> `Query OK, 1 row affected (0.00 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |
|       |                                                              | `mysql> commit;` <br> `Query OK, 0 rows affected (0.01 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |
|       | `mysql> select * from test1 for update;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |                                                              |

##### SERIALIZABLE

| steps | session 1                                                    | session 2                                                    | session 3                                                    |
| ----- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
|       | `mysql> set session tx_isolation='SERIALIZABLE';` <br> `Query OK, 0 rows affected, 1 warning (0.00 sec)` |                                                              |                                                              |
|       | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| SERIALIZABLE \|` <br> `\| tx_isolation          \| SERIALIZABLE \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| READ-COMMITTED \|` <br> `\| tx_isolation          \| READ-COMMITTED \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` | `mysql> show variables like '%iso%';` <br> `+-----------------------+-----------------+` <br> `\| Variable_name         \| Value           \|` <br> `+-----------------------+-----------------+` <br> `\| transaction_isolation \| READ-COMMITTED \|` <br> `\| tx_isolation          \| READ-COMMITTED \|` <br> `+-----------------------+-----------------+` <br> `2 rows in set (0.01 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |
|       | `mysql> begin;` <br/> `Query OK, 0 rows affected (0.00 sec)` | `mysql> begin;` <br/> `Query OK, 0 rows affected (0.00 sec)` | `mysql> begin;` <br/> `Query OK, 0 rows affected (0.00 sec)` |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |
|       | `mysql> delete from test1 where id=5;` <br> `Query OK, 1 row affected (0.01 sec)` |                                                              |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br>  `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |
|       | `mysql> commit;` <br/> `Query OK, 0 rows affected (0.01 sec)` |                                                              |                                                              |
|       | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br>  `+----+` <br> `4 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` | `mysql> select * from test1;` <br> `+----+` <br> `\| id \|` <br> `+----+` <br> `\|  1 \|` <br> `\|  2 \|` <br> `\|  3 \|` <br> `\|  4 \|` <br> `\|  5 \|` <br>  `+----+` <br> `5 rows in set (0.00 sec)` |
|       |                                                              |                                                              | `mysql> select * from test1 for update;` <br> `ERROR 1205 (HY000): Unknown error 1205` |

```sql
mysql> select * from INFORMATION_SCHEMA.INNODB_LOCKS;
+-------------+-------------+-----------+-----------+-----------------------+------------+------------+-----------+----------+-----------+
| lock_id     | lock_trx_id | lock_mode | lock_type | lock_table            | lock_index | lock_space | lock_page | lock_rec | lock_data |
+-------------+-------------+-----------+-----------+-----------------------+------------+------------+-----------+----------+-----------+
| 1336:24:3:2 | 1336        | X         | RECORD    | `transaction`.`test1` | PRIMARY    |         24 |         3 |        2 | 1         |
| 1335:24:3:2 | 1335        | X         | RECORD    | `transaction`.`test1` | PRIMARY    |         24 |         3 |        2 | 1         |
+-------------+-------------+-----------+-----------+-----------------------+------------+------------+-----------+----------+-----------+
2 rows in set, 1 warning (0.00 sec)

```



| 事务隔离级别               | 脏读(Dirty Read) | 不可重复读取(Non-Repeatable Read) | 幻读(Phantom Read) |
| -------------------------- | ---------------- | --------------------------------- | ------------------ |
| 读未提交(Read uncommitted) | 可能             | 可能                              | 可能               |
| 读已提交(Read committed)   | 不可能           | 可能                              | 可能               |
| 可重复读(Repeatable read)  | 不可能           | 不可能                            | 可能               |
| 可串行化(Serializable)     | 不可能           | 不可能                            | 不可能             |

