[Licensed under the CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)

在此感谢 [@oracle](https://www.oracle.com/)

文档不定时更新，如有疑问请及时联系本文作者，当前文档版本1.0.1

[linux.x64_11gR2_database_1of2.zip](https://www.oracle.com/database/technologies/oracle-database-software-downloads.html)

[linux.x64_11gR2_database_2of2.zip](https://www.oracle.com/database/technologies/oracle-database-software-downloads.html)

~~~
linux：centos6.x(x86_64)
oracle database：11.2.0.1.0

// 修改selinux
[root@oa ~]# vi /etc/selinux/config
SELINUX=disabled
// 关闭透明大页(transparent huge page)
[root@oa ~]# cat /sys/kernel/mm/redhat_transparent_hugepage/enabled
[always] madvise never
[root@oa ~]# cat /sys/kernel/mm/transparent_hugepage/enabled
[always] madvise never
[root@oa ~]# cat /etc/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/mapper/vg_ansible-lv_root
#          initrd /initrd-[generic-]version.img
#boot=/dev/sda
default=0
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title CentOS 6 (2.6.32-754.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-754.el6.x86_64 ro root=/dev/mapper/vg_ansible-lv_root rd_NO_LUKS LANG=en_US.UTF-8 rd_LVM_LV=vg_ansible/lv_swap rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto rd_NO_DM  KEYBOARDTYPE=pc KEYTABLE=us rd_LVM_LV=vg_ansible/lv_root rhgb quiet transparent_hugepage=never
	initrd /initramfs-2.6.32-754.el6.x86_64.img
// 重启	
[root@oa ~]# shutdown -r now

// 创建 oracle 用户账户
[root@oa ~]# useradd -m oracle
// 修改 oracle 用户密码
[root@oa ~]# passwd oracle
// 创建 oracle 用户组
[root@oa ~]# groupadd oinstall
[root@oa ~]# groupadd oper
[root@oa ~]# groupadd dba
[root@oa ~]# usermod -a -g oinstall -G oracle,oinstall,dba,oper oracle
// 验证
[root@oa ~]# id oracle
uid=500(oracle) gid=501(oinstall) groups=501(oinstall),500(oracle),502(oper),503(dba)
[root@oa ~]# su - oracle
[oracle@oa ~]$ pwd
/home/oracle
[oracle@oa ~]$ exit
logout
// 创建 oracle 安装目录
[root@oa ~]# mkdir -p /u01/app/oracle/product/11.2.0/dbhome_1/
// 指定 oracle 用户和群组
[root@oa ~]# chown -R oracle:oinstall /u01/app/
// 授权 oracle 安装目录
[root@oa ~]# chmod -R 775 /u01
// 验证
[root@oa ~]# ll /u01/
total 4
drwxrwxr-x 3 root root 4096 Apr 15 17:36 app
// 设置 oracle 用户环境变量
[root@oa ~]# su - oracle
[oracle@oa ~]$ vi .bash_profile
# 添加以下内容
export ORACLE_SID=oa
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1
export NLS_LANG=AMERICAN_AMERICA.AL32UTF8      # AMERICAN_AMERICA.ZHS16GBK
export LANG=en_US.UTF-8
export PATH=$PATH:$HOME/bin:$ORACLE_HOME/bin
// 验证
[oracle@oa ~]$ source .bash_profile
[oracle@oa ~]$ env
HOSTNAME=oa
SHELL=/bin/bash
TERM=xterm
HISTSIZE=1000
NLS_LANG=AMERICAN_AMERICA.AL32UTF8
USER=oracle
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:c                       a=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=0                       1;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.tbz=01;31:*.tbz2=01;31:*.bz=01;31:*.tz=01                       ;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:                       *.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.s                       vg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v                       =01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;                       35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.o                       gx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=0                       1;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
ORACLE_SID=oa
ORACLE_BASE=/u01/app/oracle
MAIL=/var/spool/mail/oracle
PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/oracle/bin:/home/oracle/bin:/u01/app/oracle/product/11.2.0/dbhom                       e_1/bin
PWD=/home/oracle
LANG=en_US.UTF-8
HISTCONTROL=ignoredups
SHLVL=1
HOME=/home/oracle
LOGNAME=oracle
LESSOPEN=||/usr/bin/lesspipe.sh %s
ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1
G_BROKEN_FILENAMES=1
_=/bin/env
[oracle@oa ~]$ exit
logout
// 设置 oracle 账户资源限制
[root@oa ~]# vi /etc/security/limits.conf
# 添加以下内容
oracle  hard    nproc    16384
oracle  soft    nproc    2047
oracle  hard    nofile   65536
oracle  soft    nofile   1024
oracle  hard    stack    10240
oracle  soft    stack    10240
// 验证
[root@oa ~]# su - oracle
[oracle@oa ~]$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 8526
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 2047
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
[oracle@oa ~]$ exit
logout
// 设置系统资源
[root@oa ~]# vi /etc/sysctl.conf
# 添加以下内容
fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmall = 2097152
kernel.shmmax = 536870912
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048586
// 立即生效
[root@oa ~]# sysctl -p
[root@oa ~]# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP qlen 1000
    link/ether 00:0c:29:a0:3a:e5 brd ff:ff:ff:ff:ff:ff
    inet 10.10.1.8/24 brd 10.10.1.255 scope global eth0
    inet6 fe80::20c:29ff:fea0:3ae5/64 scope link
       valid_lft forever preferred_lft forever
[root@oa ~]# hostname
oa
[root@oa ~]# vi /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1            localhost localhost.localdomain localhost6 localhost6.localdomain6
10.10.1.8   oa
[root@oa ~]# ping oa
PING oa (10.10.1.8) 56(84) bytes of data.
64 bytes from oa (10.10.1.8): icmp_seq=1 ttl=64 time=0.054 ms
64 bytes from oa (10.10.1.8): icmp_seq=2 ttl=64 time=0.085 ms

// 安装图形化服务
// 查看光盘或镜像挂载完整路径
[root@oa ~]# ls -l /dev | grep cdrom
lrwxrwxrwx 1 root root 3 11月 8 21:54 cdrom -> sr0
crw-rw---- 1 root cdrom 21, 1 11月 8 21:54 sg1
brw-rw----+ 1 root cdrom 11, 0 11月 8 21:54 sr0
// 挂载
[root@oa ~]# mount /dev/cdrom /media/
mount: block device /dev/sr0 is write-protected, mounting read-only

// 配置本地yum(Red Hat)
[root@oa ~]# vi /etc/yum.repos.d/rhel-source.repo
baseurl=file:///media/Server
enabled=1
// 配置本地yum(CentOS)
[root@oa ~]# vi /etc/yum.repos.d/CentOS-Media.repo
baseurl=file:///media/
enabled=1

// 注意：将   /etc/yum.repos.d/   其他文件重命名

// 检查本地或者网上yum
[root@oa ~]# yum list
// 清除yum缓存
[root@oa ~]# yum clean all
// 缓存本地yum
[root@oa ~]# yum makecache
// 检查本地yum group
[root@oa ~]# yum grouplist
// 安装图形化
[root@oa ~]# yum groupinstall "X Window System" "GNOME Desktop" -y

// 安装依赖包
binutils-2.20.51.0.2-5.11.el6 (x86_64)
compat-libcap1-1.10-1 (x86_64)
compat-libstdc++-33-3.2.3-69.el6 (x86_64)
compat-libstdc++-33-3.2.3-69.el6.i686
gcc-4.4.4-13.el6 (x86_64)
gcc-c++-4.4.4-13.el6 (x86_64)
glibc-2.12-1.7.el6 (i686)
glibc-2.12-1.7.el6 (x86_64)
glibc-devel-2.12-1.7.el6 (x86_64)
glibc-devel-2.12-1.7.el6.i686
ksh
libgcc-4.4.4-13.el6 (i686)
libgcc-4.4.4-13.el6 (x86_64)
libstdc++-4.4.4-13.el6 (x86_64)
libstdc++-4.4.4-13.el6.i686
libstdc++-devel-4.4.4-13.el6 (x86_64)
libstdc++-devel-4.4.4-13.el6.i686
libaio-0.3.107-10.el6 (x86_64)
libaio-0.3.107-10.el6.i686
libaio-devel-0.3.107-10.el6 (x86_64)
libaio-devel-0.3.107-10.el6.i686
make-3.81-19.el6
sysstat-9.0.4-11.el6 (x86_64)
unixODBC-2.2.14-11.el6 (x86_64) or later
unixODBC-2.2.14-11.el6.i686 or later
unixODBC-devel-2.2.14-11.el6 (x86_64) or later
unixODBC-devel-2.2.14-11.el6.i686 or later

[root@oa ~]# yum -y install binutils compat-libcap1 compat-libstdc++-33 compat-libstdc++-33.i686 gcc gcc-c++ glibc glibc.i686 glibc-devel glibc-devel.i686 ksh libgcc libgcc.i686 libstdc++ libstdc++.i686 libstdc++-devel libstdc++-devel.i686 libaio libaio.i686 libaio-devel libaio-devel.i686 make sysstat unixODBC unixODBC.i686 unixODBC-devel unixODBC-devel.i686

[root@oa ~]# yum install -y unzip zip
[root@oa ~]# unzip -q linux.x64_11gR2_database_1of2.zip
[root@oa ~]# unzip -q linux.x64_11gR2_database_2of2.zip
[root@oa ~]# chown -R oracle:oracle /home/oracle
[root@oa ~]# yum install -y xclock
[root@oa ~]# xclock

// 切换oracle用户
[root@oa ~]# su - oracle
[oracle@oa ~]$ source .bash_profile
// 192.168.192.129是自己的电脑ip
[oracle@oa ~]$ export DISPLAY=192.168.192.129:0.0
[oracle@oa ~]$ xclock
// 安装
[oracle@oa ~]$ cd /home/oracle/database
[oracle@oa ~]$ ./runInstaller

// root用户先执行下面再点击OK
[root@oa ~]# /u01/app/oraInventory/orainstRoot.sh
Changing permissions of /u01/app/oraInventory.
Adding read,write permissions for group.
Removing read,write,execute permissions for world.

Changing groupname of /u01/app/oraInventory to oinstall.
The execution of the script is complete.
[root@oa ~]# 

// 记录oraInventory，升级所需
[root@oa ~]# cat /etc/oraInst.loc
inventory_loc=/u01/app/oraInventory
inst_group=oinstall
[root@oa ~]#

[root@oa ~]# /u01/app/oracle/product/11.2.0/dbhome_1/root.sh
Running Oracle 11g root.sh script...

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /u01/app/oracle/product/11.2.0/dbhome_1

Enter the full pathname of the local bin directory: [/usr/local/bin]:           // 直接回车
   Copying dbhome to /usr/local/bin ...
   Copying oraenv to /usr/local/bin ...
   Copying coraenv to /usr/local/bin ...


Creating /etc/oratab file...
Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root.sh script.
Now product-specific root actions will be performed.
Finished product-specific root actions.
[root@oracle ~]#

// 多数据库/多实例切换会用到
[root@oa db]# ll /usr/local/bin/coraenv
-rwxr-xr-x 1 root root 6583 Mar 12 18:16 /usr/local/bin/coraenv
[root@oa db]# ll /usr/local/bin/dbhome
-rwxr-xr-x 1 root root 2445 Mar 12 18:16 /usr/local/bin/dbhome
[root@oa db]# ll /usr/local/bin/oraenv
-rwxr-xr-x 1 root root 7003 Mar 12 18:16 /usr/local/bin/oraenv

// 创建实例
[oracle@oa ~]$ dbca

// 记录实例信息，开机自启动所需
[root@oa db]# cat /etc/oratab
oa:/u01/app/oracle/product/11.2.0/dbhome_1:N

// 创建监听(两种方式)
[oracle@oa ~]$ netca
[oracle@oa ~]$ netmgr
// 监听服务状态
[oracle@oa ~]$ lsnrctl status

// 静态监听参考示例
[oracle@oracle ~]$ cat /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
# listener.ora Network Configuration File: /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
# Generated by Oracle configuration tools.

LISTENER =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 10.10.1.8)(PORT = 1521))
  )

ADR_BASE_LISTENER = /u01/app/oracle

[oracle@oracle ~]$ cat /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/tnsnames.ora
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

OA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 10.10.1.8)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)            # 连接类型 (SERVER = DEDICATED) 专用  (SERVER = SHARED) 共享 (SERVER = POOLED) 池 不写默认是 (Database Default)
      (SERVICE_NAME = oa)
    )
  )

[oracle@oracle ~]$
~~~